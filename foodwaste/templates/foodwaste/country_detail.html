{% extends "personal/header.html" %}

{% block content %}
<br>
    <h2>Country Details:</h2>
      {% load humanize %}
    <br>
    <div class="row content">
    <div class="col-sm-5">
    <p><h5>Name: {{country_details.name}}</h5></p>
    <p>GDP: {{country_details.gdp|intword}}</p>
    <p>Population: {{country_details.population|intword}}</p>
    <hr>
    <p>Total Waste Per Person: {{country_details.waste_per_person}} lbs</p>
    <p>Oraganic Waste Per Person:
      {% if country_details.organic_waste_per_person != 0  %}
          {{ country_details.organic_waste_per_person|intcomma }}
          {% else %}
          Not Available
          {% endif %}
       </p>
  </div>
  </div>
  * Raw dataset obtainted from worldbank.org for this analysis
  <div class="row content">
  <div class="col-sm-5" id="container" style="width: 55%;">
      <hr>
      <br>
        <h5> {{country_details.name}} Vs Rest of the world </h5>
        <canvas id="pie-chart2"></canvas>
        <br>
        <br>
        <h5> Organic waste Vs Other waste </h5>
        <canvas id="pie-chart"></canvas>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
        <script>
        var config2 = {
            type: 'pie',
            data: {
              datasets: [{
                data:  {{ data2|safe }},
                backgroundColor: [
                'rgb(255, 99, 132)',
                'rgb(54, 162, 235)'
                ],
                label: 'Organic Waste vs other waste'
              }],
              labels: {{ labels2|safe }}
            },
            options: {
              responsive: true
            }
          };
        var config = {
            type: 'pie',
            data: {
              datasets: [{
                data:  {{ data|safe }},
                backgroundColor: [
                'rgb(255, 205, 86)',
                'rgb(155, 105, 86)'
                ],
                label: 'Organic Waste vs other waste'
              }],
              labels: {{ labels|safe }}
            },
            options: {
              responsive: true
            }
          };
          {% if country_details.organic_waste_per_person != 0  %}
          window.onload = function() {
            var ctx = document.getElementById('pie-chart').getContext('2d');
            var ctx2 = document.getElementById('pie-chart2').getContext('2d');
            window.myPie = new Chart(ctx, config);
            window.myPie = new Chart(ctx2, config2);
              {% endif %}
          };
          </script>
    </div>
    </div>


{% endblock %}
